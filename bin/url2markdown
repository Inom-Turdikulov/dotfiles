#!/usr/bin/env bash

BROWSER=brave

# Get the URL from the clipboard
url=$(xclip -o -selection clipboard)

# Use curl to fetch the page and extract the title with sed
title=$($BROWSER  --headless --dump-dom --enable-logging --disable-gpu "$url"|sed -n -e 's!.*<title>\(.*\)</title>.*!\1!p')

# Format the markdown link using the URL and title
markdown_link="[$title]($url)"

# Put the markdown link back into the clipboard
echo -n "$markdown_link" | xclip -sel clip

notify-send "Markdown link copied to clipboard: $markdown_link"